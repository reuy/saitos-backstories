<?xml version="1.0" encoding="UTF-8"?>
<Patch>
   <!-- Makes the Glitterworld Pawnkinds use Vanilla Charge Rifles. -->
   <Operation Class="PatchOperationAdd">
      <xpath>/ThingDefs/ThingDef[defName = "Gun_ChargeRifle"]/weaponTags</xpath>
      <value>
         <li>SpacerRifle</li>
      </value>
   </Operation>
   <Operation Class="PatchOperationFindMod">
      <mods>
         <li>Vanilla Apparel Expanded</li>
      </mods> 
      <match Class="PatchOperationSequence">
         <!-- Makes Glitterworld Soldier pawnkinds and Steamer Pawnkinds use VWE weapons. -->
         <operations>
            <!-- Steamer Weapons-->
            <li Class="PatchOperationAdd">
               <xpath>/ThingDefs/ThingDef[defName = "VWE_Gun_Musket"]/weaponTags</xpath>
               <value>
                  <label>SteamerRifle</label>
               </value>
            </li>
            <li Class="PatchOperationAdd">
               <xpath>/ThingDefs/ThingDef[defName = "VWE_Gun_Flintlock"]/weaponTags</xpath>
               <value>
                  <label>SteamerPistol</label>
               </value>
            </li>
            <Operation Class="PatchOperationFindMod">
               <mods>
                  <li>Vanilla Apparel Expanded</li>
               </mods>
               <match Class="PatchOperationSequence">
                  <!-- Spacer Weapons -->
                  <li Class="PatchOperationAdd">
                     <xpath>/ThingDefs/ThingDef[defName = "VWE_Gun_ChargeSniperRifle"]/weaponTags</xpath>
                     <value>
                        <label>SpacerSniper</label>
                     </value>
                  </li>
                  <li Class="PatchOperationAdd">
                     <xpath>/ThingDefs/ThingDef[defName = "VWE_Bullet_ChargeMinigun"]/weaponTags</xpath>
                     <value>
                        <label>SpacerHeavy</label>
                     </value>
                  </li>
                  <li Class="PatchOperationAdd">
                     <xpath>/ThingDefs/ThingDef[defName = "VWE_Gun_ChargeShotgun"]/weaponTags</xpath>
                     <value>
                        <label>SpacerShotgun</label>
                     </value>
                  </li>
                  <li Class="PatchOperationAdd">
                     <xpath>/ThingDefs/ThingDef[defName = "VWE_Bullet_ChargePistol"]/weaponTags</xpath>
                     <value>
                        <label>SpacerPistol</label>
                     </value>
                  </li>
               </match>
            </Operation>
         </operations>
      </match>
      <nomatch Class="PatchOperationSequence">
         <operations>
            <!-- If VWE is NOT installed, all Glitterworld soldiertypes start with Charge rifles instead. -->
                  <li Class="PatchOperationAdd">
                     <xpath>/ThingDefs/ThingDef[defName = "Gun_ChargeRifle"]/weaponTags</xpath>
                     <value>
                        <li>SpacerSniper</li>
						<li>SpacerHeavy</li>
						<li>SpacerShotgun</li>
						<li>SpacerPistol</li>
                     </value>
                  </li>
         </operations>
      </nomatch>
   </Operation>
</Patch>

